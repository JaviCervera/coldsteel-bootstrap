name: deploy_web
on: [workflow_dispatch]
jobs:
  deploy_web:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2
      - name: Install ColdSteel ğŸ“¥
        run: |
          mkdir coldsteel
          cd coldsteel
          wget https://github.com/JaviCervera/coldsteel/releases/latest/download/coldsteel-emscripten.zip
          unzip coldsteel-emscripten.zip
      - name: Build project ğŸ”§
        run: |
          cd coldsteel
          ./csbuild ../project
      - name: Publish on Netlify ğŸš€
        uses: netlify/actions/build@master
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
          NETLIFY_DIR: project.build
